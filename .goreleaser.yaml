# This is a goreleaser file to build the linux binary.
# It was initially generated by goreleaser init
# You can build locally (even non-linux) by running:
# goreleaser build  --snapshot --single-target
before:
  hooks:
    - pwd
builds:
  - env:
      - CGO_ENABLED=1
    goos:
      - linux
    goarch:
      - amd64
    ldflags:
      # By default, goreleaser adds -s -w to remove the symbols and debugging information
      # https://github.com/goreleaser/goreleaser/blob/v1.9.2/www/docs/customization/build.md#builds
      # but jobsworth is only 10MB so that is negligible for us so we take out those flags
      - -X main.version={{.Version}}
      - -X main.commit={{.Commit}}
      - -X main.date={{.Date}}
      - -X main.builtBy=goreleaser
archives:
  - format: zip
    # Hack to exclude extra files such as readme
    # that are included by default.
    # Goreleaser ignores this field if it is the empty array,
    # so we need an array containing a dummy glob
    # https://github.com/goreleaser/goreleaser/blob/v1.9.2/internal/pipe/archive/archive.go#L60
    files: [nonexistant.txt*]
changelog:
  sort: asc
  filters:
    exclude:
      - '^docs:'
      - '^test:'
